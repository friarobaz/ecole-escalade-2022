{
  "version": 3,
  "sources": ["../persistable/lib/utils.js", "../persistable/lib/index.js", "dep:@roxi_routify__persistable"],
  "sourcesContent": ["const stringHashCode = (str) =>\n  str\n    .split('')\n    .reduce((a, b) => {\n      a = (a << 5) - a + b.charCodeAt(0)\n      return a & a\n    }, 0)\n    .toString(36)\n\nconst fnToName = (fn) => {\n  const fnStr = fn.toString()\n  const length = fnStr.length\n  const snippet = fnStr\n    .replace(/[^\\w]/gm, '_')\n    .replace(/\\_+/gm, '_')\n    .replace(/^\\_/, '')\n    .slice(0, 20)\n  return snippet + '-' + length + '-' + stringHashCode(fnStr)\n}\n\nmodule.exports = { fnToName }\n", "/// <reference path=\"../typedef.js\" />\n\nconst { existsSync, writeFileSync, mkdirSync, readFileSync } = require('fs')\nconst { resolve } = require('path')\nconst { fnToName } = require('./utils')\n\n/** @type {Options} */\nconst defaults = {\n  outputDir: 'persistable',\n  minify: false,\n}\n\n/** @type {Persistable} */\nconst persistable = (options = {}) => {\n  options = Object.assign(defaults, options)\n\n  /** @type {Persist} */\n  const persist = async (callback, refresh, name) => {\n    name = name || fnToName(callback)\n    const filepath = resolve(persist.outputDir, name + '.json')\n\n    if (!existsSync(filepath) || refresh) {\n      mkdirSync(persist.outputDir, { recursive: true })\n      const value = await callback()\n      const stamp = {value, updated: new Date}\n      writeFileSync(\n        filepath,\n        JSON.stringify(stamp, null, persist.minify ? 0 : 2),\n      )\n    }\n\n    return JSON.parse(readFileSync(filepath, 'utf-8')).value\n  }\n\n  Object.assign(persist, options)\n\n  return persist\n}\n\nmodule.exports = persistable\n", "export default require(\"./node_modules/persistable/lib/index.js\");"],
  "mappings": ";;;;;;;;;;;;AAAA;AAAA;AAAA,QAAM,iBAAiB,CAAC,QACtB,IACG,MAAM,EAAE,EACR,OAAO,CAAC,GAAG,MAAM;AAChB,UAAK,MAAK,KAAK,IAAI,EAAE,WAAW,CAAC;AACjC,aAAO,IAAI;AAAA,IACb,GAAG,CAAC,EACH,SAAS,EAAE;AAEhB,QAAM,WAAW,CAAC,OAAO;AACvB,YAAM,QAAQ,GAAG,SAAS;AAC1B,YAAM,SAAS,MAAM;AACrB,YAAM,UAAU,MACb,QAAQ,WAAW,GAAG,EACtB,QAAQ,SAAS,GAAG,EACpB,QAAQ,OAAO,EAAE,EACjB,MAAM,GAAG,EAAE;AACd,aAAO,UAAU,MAAM,SAAS,MAAM,eAAe,KAAK;AAAA,IAC5D;AAEA,WAAO,UAAU,EAAE,SAAS;AAAA;AAAA;;;ACpB5B;AAAA;AAEA,QAAM,EAAE,YAAY,eAAe,WAAW,iBAAiB;AAC/D,QAAM,EAAE,YAAY;AACpB,QAAM,EAAE,aAAa;AAGrB,QAAM,WAAW;AAAA,MACf,WAAW;AAAA,MACX,QAAQ;AAAA,IACV;AAGA,QAAM,cAAc,CAAC,UAAU,CAAC,MAAM;AACpC,gBAAU,OAAO,OAAO,UAAU,OAAO;AAGzC,YAAM,UAAU,OAAO,UAAU,SAAS,SAAS;AACjD,eAAO,QAAQ,SAAS,QAAQ;AAChC,cAAM,WAAW,QAAQ,QAAQ,WAAW,OAAO,OAAO;AAE1D,YAAI,CAAC,WAAW,QAAQ,KAAK,SAAS;AACpC,oBAAU,QAAQ,WAAW,EAAE,WAAW,KAAK,CAAC;AAChD,gBAAM,QAAQ,MAAM,SAAS;AAC7B,gBAAM,QAAQ,EAAC,OAAO,SAAS,IAAI,OAAI;AACvC,wBACE,UACA,KAAK,UAAU,OAAO,MAAM,QAAQ,SAAS,IAAI,CAAC,CACpD;AAAA,QACF;AAEA,eAAO,KAAK,MAAM,aAAa,UAAU,OAAO,CAAC,EAAE;AAAA,MACrD;AAEA,aAAO,OAAO,SAAS,OAAO;AAE9B,aAAO;AAAA,IACT;AAEA,WAAO,UAAU;AAAA;AAAA;;;ACvCjB,IAAO,mCAAQ;",
  "names": []
}
